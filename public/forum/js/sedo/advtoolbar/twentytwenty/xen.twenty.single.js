/*Twentytwenty + XenForo Integration*/
typeof Sedo=="undefined"&&(Sedo={}),!function(n,t,i){Sedo.TwentyX2={init:function(i){i.each(function(){var i=n(this),s=i.find("img").eq(0),a=i.find("img").eq(1),b,v,o,y,p,k;if(!(s.width()<=2)&&!(s.height()<=2)&&i.data("complete")!=1){var nt=parseFloat(i.data("diffPos")),f=parseInt(s.data("width")),e=parseInt(a.data("width")),w=i.parents(".adv_bimg_block").addClass("compare"),l=w.width(),rt=f/100,d=i.data("phrase").split("|");i.addClass("twentytwenty-container").data("complete",1),b=function(){if(i.hasClass("Fluid")){l=w.width();var n=l*rt,t=new Image,r,u,o;return t.src=s.attr("src"),u=t.width,t.src=a.attr("src"),o=t.width,r=u>o?u:o,n>r&&(n=r),f=e=n,n}},b(),l!=0&&(f>l&&(f=l,s.attr("data-width",f)),e>l&&(e=l,a.attr("data-width",e))),s.width(f),a.width(e),v=f>e?f:e,i.width(v).attr("data-width",v);var r=nt?nt:.5,u=i.hasClass("DiffV")?"vertical":"horizontal",tt=u==="vertical"?"down":"left",it=u==="vertical"?"up":"right";i.wrap("<div class='twentytwenty-wrapper twentytwenty-"+u+"'></div>"),i.append("<div class='twentytwenty-overlay'></div>"),i.append("<div class='twentytwenty-handle'></div>"),o=i.find(".twentytwenty-handle"),o.append("<span class='twentytwenty-"+tt+"-arrow'></span>"),o.append("<span class='twentytwenty-"+it+"-arrow'></span>");var c=i.find("img:first").addClass("twentytwenty-before"),et=i.find("img:last").addClass("twentytwenty-after"),g=i.find(".twentytwenty-overlay");g.append("<div class='twentytwenty-before-label-text'>"+d[0]+"</div><div class='twentytwenty-before-label'></div>"),g.append("<div class='twentytwenty-after-label-text'>"+d[1]+"</div><div class='twentytwenty-after-label'></div>");var ut=function(n){var r=c.width(),t=c.height(),i;return t<2&&(i=new Image,i.src=c.attr("src"),t=i.height*(r/i.width)),{w:r+"px",h:t+"px",cw:n*r+"px",ch:n*t+"px"}},ft=function(n){u==="vertical"?c.css("clip","rect(0,"+n.w+","+n.ch+",0)"):c.css("clip","rect(0,"+n.cw+","+n.h+",0)"),i.css("height",n.h)},h=function(n){var t=ut(n);o.css(u==="vertical"?"top":"left",u==="vertical"?t.ch:t.cw),ft(t)};n(t,o).on("adjustTwenty",function(){h(r)});h(r),y=function(){var n=w.parent().width(),u=i.width(),c=f>e?s:a,l=c.width(),o=i.find(".twentytwenty-overlay"),t;if(i.hasClass("Fluid")){t=b(),s.width(t),a.width(t),i.width(t),h(r);return}if(u<n){u<v&&(i.width(n),o.width(n),h(r));return}i.width(n),o.width(n),h(r)},y();n(t,i).on("resize",function(){y()});i.data("sedoTwenty",{adjustTwenty:h,resizeTwenty:y}),p=0,k=0;o.on("movestart",function(n){(n.distX>n.distY&&n.distX<-n.distY||n.distX<n.distY&&n.distX>-n.distY)&&u!=="vertical"?n.preventDefault():(n.distX<n.distY&&n.distX<-n.distY||n.distX>n.distY&&n.distX>-n.distY)&&u==="vertical"&&n.preventDefault(),i.addClass("active"),p=i.offset().left,offsetY=i.offset().top,k=c.width(),imgHeight=c.height()});o.on("moveend",function(){i.removeClass("active")});o.on("move",function(n){i.hasClass("active")&&(r=u==="vertical"?(n.pageY-offsetY)/imgHeight:(n.pageX-p)/k,r<0&&(r=0),r>1&&(r=1),h(r))});i.find("img").on("mousedown",function(n){n.preventDefault()})}})},reload:function(){n(".AdvBimgDiff").each(function(){var t=n(this);t.height()==0&&t.find("img").load(function(){t.width(t.data("width")).trigger("adjustTwenty")})})},rebuild:function(){var i=n(".AdvBimgDiff");Sedo.TwentyX2.init(i),i.trigger("resize")}},XenForo.register(".AdvBimgDiff","Sedo.TwentyX2.init");n(i).on("XenForoActivate",Sedo.TwentyX2.reload);n(t).on("load sedoRebuild",Sedo.TwentyX2.rebuild)}(jQuery,this,document);